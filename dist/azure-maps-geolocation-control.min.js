/* MIT License - Copyright (c) Microsoft Corporation. */


!function(t,l){"use strict";var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(t,e)};var r=function(){return(r=Object.assign||function(t){for(var e,o=1,a=arguments.length;o<a;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function e(t,r,s,l){return new(s=s||Promise)(function(o,e){function a(t){try{n(l.next(t))}catch(t){e(t)}}function i(t){try{n(l.throw(t))}catch(t){e(t)}}function n(t){var e;t.done?o(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(a,i)}n((l=l.apply(t,r||[])).next())})}function a(o,a){var i,n,r,t,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,n&&(r=2&e[0]?n.return:e[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,e[1])).done)return r;switch(n=0,r&&(e=[2&e[0],r.value]),e[0]){case 0:case 1:r=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,n=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(r=0<(r=s.trys).length&&r[r.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!r||e[1]>r[0]&&e[1]<r[3])){s.label=e[1];break}if(6===e[0]&&s.label<r[1]){s.label=r[1],r=e;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(e);break}r[2]&&s.ops.pop(),s.trys.pop();continue}e=a.call(o,s)}catch(t){e=[6,t],n=0}finally{i=r=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var i=(n.merge=function(t,e){for(var o=window||global,a=0,i=t.split(".");a<i.length;a++){var n=i[a];if(!o[n])return e;o=o[n]}return r(r({},o),e)},n);function n(){}var s=(c.getHclStyle=function(t){return t.getMapContainer().classList.contains("high-contrast-dark")?l.ControlStyle.dark:t.getMapContainer().classList.contains("high-contrast-light")?l.ControlStyle.light:null},c.getAutoStyle=function(t){switch(t.getStyle().style){case"satellite":case"satellite_road_labels":case"grayscale_dark":case"night":case"night":case"high_contrast_dark":return l.ControlStyle.dark}return l.ControlStyle.light},c);function c(){}var p,u,g,m=(p=l.internal.EventEmitter,o(u=d,g=p),u.prototype=null===g?Object.create(g):(h.prototype=g.prototype,new h),d.prototype.dispose=function(){var e=this;this._map&&this._map.controls.remove(this),Object.keys(this).forEach(function(t){e[t]=null})},d.prototype.getLastKnownPosition=function(){return this._lastKnownPosition},d.prototype.onAdd=function(t,e){var o=this;this._map=t,this._hclStyle=s.getHclStyle(t),this._resource=d._getTranslations(this._map.getStyle().language);var a=d._iconTemplate.replace("{color}","Gray"),i=d._iconTemplate.replace("{color}","DeepSkyBlue"),n=d._gpsBtnCss.replace(/{grayIcon}/g,a).replace(/{blueIcon}/g,i),r=document.createElement("style");return r.innerHTML=n,document.body.appendChild(r),this._container=document.createElement("div"),this._container.classList.add("azure-maps-control-container"),this._container.setAttribute("aria-label",this._resource.title),this._container.style.flexDirection="column",this._container.style.display="none",this._button=document.createElement("button"),this._button.classList.add("azmaps-map-gpsBtn"),this._button.classList.add("azmaps-map-gpsDisabled"),this._button.setAttribute("title",this._resource.enableTracking),this._button.setAttribute("alt",this._resource.enableTracking),this._button.setAttribute("type","button"),this._button.addEventListener("click",this._toggleBtn),this._updateState(),this.setOptions(this._options),this._container.appendChild(this._button),d.isSupported().then(function(t){t?o._container.style.display="":o._invokeEvent("geolocationerror",{code:2,message:"Geolocation API not supported by device.",PERMISSION_DENIED:1,POSITION_UNAVAILABLE:2,TIMEOUT:3})}),this._map.events.add("movestart",this._mapMoveStarted),this.setOptions(this._options),this._container},d.prototype.onRemove=function(){this._container&&this._container.remove(),"auto"===this._options.style&&this._map.events.remove("styledata",this._mapStyleChanged),this._map.events.remove("movestart",this._mapMoveStarted),void 0!==this._watchId&&navigator.geolocation.clearWatch(this._watchId),this._gpsMarker&&this._map.markers.remove(this._gpsMarker),this._map=null},d.prototype.getOptions=function(){return Object.assign({},this._options)},d.prototype.setOptions=function(t){if(t){var e="white";if(this._hclStyle)"dark"===this._hclStyle&&(e=this._darkColor);else switch("auto"===this._options.style&&this._map.events.remove("styledata",this._mapStyleChanged),this._options.style=t.style,t.style){case"dark":e=this._darkColor;break;case"auto":this._map.events.add("styledata",this._mapStyleChanged),e=this._getColorFromMapStyle()}if(this._button.style.backgroundColor=e,t.markerColor&&(this._options.markerColor=t.markerColor,this._gpsMarker&&this._gpsMarker.setOptions({color:t.markerColor})),"number"==typeof t.maxZoom&&(this._options.maxZoom=Math.min(Math.max(t.maxZoom,0),24)),"boolean"==typeof t.calculateMissingValues&&(this._options.calculateMissingValues=t.calculateMissingValues),"boolean"==typeof t.updateMapCamera&&(this._options.updateMapCamera=t.updateMapCamera,this._updateMapCamera=t.updateMapCamera),"boolean"==typeof t.showUserLocation&&(this._options.showUserLocation=t.showUserLocation,this._gpsMarker?this._gpsMarker.setOptions({visible:this._isActive&&this._options.showUserLocation}):this._lastKnownPosition&&this._onGpsSuccess()),"boolean"==typeof t.trackUserLocation&&(this._options.trackUserLocation=t.trackUserLocation),t.positionOptions){var o={};t.positionOptions.enableHighAccuracy&&(o.enableHighAccuracy=t.positionOptions.enableHighAccuracy),"number"==typeof t.positionOptions.maximumAge&&(o.maximumAge=t.positionOptions.maximumAge),"number"==typeof t.positionOptions.timeout&&(o.timeout=t.positionOptions.timeout),0<Object.keys(o).length&&(this._options.positionOptions=Object.assign(this._options.positionOptions,o),this._stopTracking(),this._updateState())}}},d.prototype.toggle=function(t){this._isActive="boolean"==typeof t?t:!this._isActive,this._isActive&&this._options.trackUserLocation&&this._lastKnownPosition&&this._onGpsSuccess(),this._updateMapCamera=this._options.updateMapCamera,this._updateState()},d.isSupported=function(){return e(this,void 0,void 0,function(){return a(this,function(t){switch(t.label){case 0:return window.navigator.permissions?[4,window.navigator.permissions.query({name:"geolocation"})]:[3,2];case 1:return[2,"denied"!==t.sent().state];case 2:return[2,!!window.navigator.geolocation]}})})},d.prototype._getColorFromMapStyle=function(){return s.getAutoStyle(this._map)===l.ControlStyle.dark?this._darkColor:"white"},d.prototype._stopTracking=function(){"number"==typeof this._watchId&&(navigator.geolocation.clearWatch(this._watchId),this._watchId=null)},d.prototype._updateState=function(){this._isActive&&!this._options.trackUserLocation||this._stopTracking(),this._gpsMarker&&this._gpsMarker.setOptions({visible:this._isActive&&this._options.showUserLocation});var t=this._resource.myLocation,e="azmaps-map-gpsEnabled",o="azmaps-map-gpsDisabled";this._isActive?(e="azmaps-map-gpsDisabled",o="azmaps-map-gpsEnabled",this._options.trackUserLocation?("number"!=typeof this._watchId&&(this._watchId=navigator.geolocation.watchPosition(this._onGpsSuccess,this._onGpsError,this._options.positionOptions)),t=this._resource.disableTracking):navigator.geolocation.getCurrentPosition(this._onGpsSuccess,this._onGpsError,this._options.positionOptions)):this._options.trackUserLocation&&(t=this._resource.enableTracking),this._button.setAttribute("title",t),this._button.setAttribute("alt",t),this._button.classList.remove(e),this._button.classList.add(o)},d.prototype._getMarkerIcon=function(){var t=d._gpsDotIcon,e=this._lastKnownPosition.properties.heading;if(this._options.trackUserLocation&&null!==e&&!isNaN(e)){var o="-webkit-transform:rotate("+(e=Math.round(e))+"deg);transform:rotate("+e+"deg)";t=d._gpsArrowIcon.replace("{transform}",o)}return t},d._getTranslations=function(t){switch(t&&0<t.indexOf("-")&&(t=t.substring(0,t.indexOf("-"))),t.toLowerCase()){case"af":return{enableTracking:"begin dop",disableTracking:"stop die dop",myLocation:"my plek",title:"ligginggewing beheer"};case"ar":return{enableTracking:"بدء تتبع",disableTracking:"تتبع توقف",myLocation:"موقعي",title:"السيطرة تحديد الموقع الجغرافي"};case"eu":return{enableTracking:"Hasi segimendua",disableTracking:"Stop jarraipena",myLocation:"Nire kokapena",title:"Geokokapen kontrol"};case"bg":return{enableTracking:"Започнете да проследявате",disableTracking:"Спиране на проследяването",myLocation:"Моето място",title:"контрол за геолокация"};case"zh":return{enableTracking:"开始跟踪",disableTracking:"停止追踪",myLocation:"我的位置",title:"地理位置控制"};case"hr":return{enableTracking:"Započnite praćenje",disableTracking:"zaustavljanje praćenje",myLocation:"Moja lokacija",title:"kontrola Geolocation"};case"cs":return{enableTracking:"začít sledovat",disableTracking:"Zastavit sledování",myLocation:"Moje lokace",title:"ovládání Geolocation"};case"da":return{enableTracking:"Start sporing",disableTracking:"Stop sporing",myLocation:"min placering",title:"Geolocation kontrol"};case"nl":return{enableTracking:"beginnen met het bijhouden",disableTracking:"stop volgen",myLocation:"Mijn locatie",title:"Geolocation controle"};case"et":return{enableTracking:"Alusta jälgimist",disableTracking:"Stopp jälgimise",myLocation:"Minu asukoht",title:"Geolocation kontrolli"};case"fi":return{enableTracking:"Aloita seuranta",disableTracking:"Lopeta seuranta",myLocation:"Minun sijaintini",title:"Geolocation ohjaus"};case"fr":return{enableTracking:"Démarrer le suivi",disableTracking:"suivi d'arrêt",myLocation:"Ma position",title:"le contrôle de géolocalisation"};case"gl":return{enableTracking:"comezar a controlar",disableTracking:"seguimento parada",myLocation:"A miña localización",title:"control de xeolocalización"};case"de":return{enableTracking:"starten Sie Tracking",disableTracking:"Stop-Tracking",myLocation:"Mein Standort",title:"Geolokalisierung Steuer"};case"el":return{enableTracking:"Ξεκινήστε την παρακολούθηση",disableTracking:"Διακοπή παρακολούθησης",myLocation:"Η τοποθεσία μου",title:"ελέγχου geolocation"};case"hi":return{enableTracking:"ट्रैक करना शुरू",disableTracking:"बंद करो ट्रैकिंग",myLocation:"मेरा स्थान",title:"जियोलोकेशन नियंत्रण"};case"hu":return{enableTracking:"követés indítása",disableTracking:"követés leállítása",myLocation:"Saját hely",title:"Geolocation ellenőrzés"};case"id":return{enableTracking:"Mulai pelacakan",disableTracking:"berhenti pelacakan",myLocation:"Lokasi saya",title:"kontrol geolocation"};case"it":return{enableTracking:"Inizia il monitoraggio",disableTracking:"monitoraggio arresto",myLocation:"La mia posizione",title:"controllo geolocalizzazione"};case"ja":return{enableTracking:"追跡を開始",disableTracking:"追跡を停止",myLocation:"私の場所",title:"ジオロケーション制御"};case"kk":return{enableTracking:"қадағалау бастау",disableTracking:"қадағалау тоқтату",myLocation:"Менің орналасуы",title:"геоорын бақылау"};case"ko":return{enableTracking:"추적 시작",disableTracking:"정지 추적",myLocation:"내 위치",title:"위치 정보 제어"};case"es":return{enableTracking:"iniciar el seguimiento",disableTracking:"Detener el seguimiento",myLocation:"Mi ubicacion",title:"control de geolocalización"};case"lv":return{enableTracking:"Sākt izsekošana",disableTracking:"Stop izsekošana",myLocation:"Mana atrašanās vieta",title:"Geolocation kontrole"};case"lt":return{enableTracking:"pradėti stebėti",disableTracking:"Sustabdyti sekimo",myLocation:"Mano vieta",title:"Geografinė padėtis kontrolė"};case"ms":return{enableTracking:"mula menjejaki",disableTracking:"Stop pengesanan",myLocation:"Lokasi saya",title:"kawalan geolokasi"};case"nb":return{enableTracking:"begynne å spore",disableTracking:"stopp sporing",myLocation:"Min posisjon",title:"geolocation kontroll"};case"pl":return{enableTracking:"rozpocząć śledzenie",disableTracking:"Zatrzymaj śledzenie",myLocation:"Moja lokacja",title:"kontrola Geolokalizacja"};case"pt":return{enableTracking:"começar a controlar",disableTracking:"rastreamento parada",myLocation:"Minha localização",title:"controle de geolocalização"};case"ro":return{enableTracking:"Pornire urmărire",disableTracking:"Oprire urmărire",myLocation:"Locatia mea",title:"controlul de geolocalizare"};case"ru":return{enableTracking:"Начать отслеживание",disableTracking:"остановка отслеживания",myLocation:"Мое местонахождение",title:"контроль геолокации"};case"sr":return{enableTracking:"Старт трацкинг",disableTracking:"стоп праћење",myLocation:"Моја локација",title:"kontrola геолоцатион"};case"sk":return{enableTracking:"začať sledovať",disableTracking:"zastaviť sledovanie",myLocation:"moja poloha",title:"ovládanie Geolocation"};case"sl":return{enableTracking:"Začni sledenje",disableTracking:"Stop za sledenje",myLocation:"moja lokacija",title:"nadzor Geolocation"};case"sv":return{enableTracking:"börja spåra",disableTracking:"Stoppa spårning",myLocation:"Min plats",title:"geolocation kontroll"};case"th":return{enableTracking:"เริ่มการติดตาม",disableTracking:"ติดตามหยุด",myLocation:"ตำแหน่งของฉัน",title:"ควบคุม Geolocation"};case"tr":return{enableTracking:"izlemeyi başlat",disableTracking:"Dur izleme",myLocation:"Benim konumum",title:"Coğrafi Konum kontrolü"};case"uk":return{enableTracking:"почати відстеження",disableTracking:"зупинка відстеження",myLocation:"моє місце розташування",title:"контроль геолокації"};case"vi":return{enableTracking:"Bắt đầu theo dõi",disableTracking:"dừng theo dõi",myLocation:"vị trí của tôi",title:"kiểm soát định vị"};case"en":default:return{enableTracking:"Start tracking",disableTracking:"Stop tracking",myLocation:"My location",title:"Geolocation control"}}},d._gpsArrowIcon='<div style="{transform}"><svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 28 28"><g transform="translate(2 2)"><polygon points="12,0 0,24 12,17 24,24" stroke-width="2" stroke="white" fill="{color}"/></g></svg></div>',d._gpsDotIcon='<div class="azmaps-map-gpsPulseIcon" style="background-color:{color}"></div>',d._iconTemplate="data:image/svg+xml;utf8,<svg version='1.1' xmlns='http://www.w3.org/2000/svg' x='0' y='0' viewBox='0 0 561 561' xml:space='preserve'><g fill='{color}'><path d='M280.5,178.5c-56.1,0-102,45.9-102,102c0,56.1,45.9,102,102,102c56.1,0,102-45.9,102-102C382.5,224.4,336.6,178.5,280.5,178.5z M507.45,255C494.7,147.9,410.55,63.75,306,53.55V0h-51v53.55C147.9,63.75,63.75,147.9,53.55,255H0v51h53.55C66.3,413.1,150.45,497.25,255,507.45V561h51v-53.55C413.1,494.7,497.25,410.55,507.45,306H561v-51H507.45z M280.5,459C181.05,459,102,379.95,102,280.5S181.05,102,280.5,102S459,181.05,459,280.5S379.95,459,280.5,459z'/></g></svg>",d._gpsBtnCss='.azmaps-map-gpsBtn{margin:0;padding:0;border:none;border-collapse:collapse;width:32px;height:32px;text-align:center;cursor:pointer;line-height:32px;background-repeat:no-repeat;background-size:20px;background-position:center center;z-index:200;box-shadow:0px 0px 4px rgba(0,0,0,0.16);}.azmaps-map-gpsDisabled{background-image:url("{grayIcon}");}.azmaps-map-gpsDisabled:hover{background-image:url("{blueIcon}");filter:brightness(90%);}.azmaps-map-gpsEnabled{background-image:url("{blueIcon}");}.azmaps-map-gpsEnabled:hover{background-image:url("{blueIcon}");filter:brightness(90%);}.azmaps-map-gpsPulseIcon{display:block;width:15px;height:15px;border-radius:50%;background:orange;border:2px solid white;cursor:pointer;box-shadow:0 0 0 rgba(0, 204, 255, 0.6);animation:pulse 2s infinite;}@keyframes pulse {0% {box-shadow:0 0 0 0 rgba(0, 204, 255, 0.6);}70% {box-shadow:0 0 0 20px rgba(0, 204, 255, 0);}100% {box-shadow:0 0 0 0 rgba(0, 204, 255, 0);}}',d);function h(){this.constructor=u}function d(t){var s=p.call(this)||this;return s._options={style:"light",positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},showUserLocation:!0,trackUserLocation:!1,markerColor:"DodgerBlue",maxZoom:15,calculateMissingValues:!1,updateMapCamera:!0},s._darkColor="#011c2c",s._hclStyle=null,s._isActive=!1,s._updateMapCamera=!0,s._toggleBtn=function(){s.toggle()},s._mapStyleChanged=function(){s._button&&!s._hclStyle&&(s._button.style.backgroundColor=s._getColorFromMapStyle())},s._mapMoveStarted=function(){s._updateMapCamera=!1},s._onGpsSuccess=function(t){var e;if(t){e=[t.coords.longitude,t.coords.latitude];var o={timestamp:new Date(t.timestamp),_timestamp:t.timestamp};if(Object.assign(o,t.coords),s._options.calculateMissingValues&&s._lastKnownPosition){if("number"!=typeof t.coords.speed){var a=t.timestamp-s._lastKnownPosition.properties._timestamp,i=l.math.getDistanceTo(s._lastKnownPosition.geometry.coordinates,e);o.speed=i/(.001*a)}"number"!=typeof t.coords.heading&&(o.heading=l.math.getHeading(s._lastKnownPosition.geometry.coordinates,e))}s._lastKnownPosition=new l.data.Feature(new l.data.Point(e),o)}if(s._lastKnownPosition){if(e=e||s._lastKnownPosition.geometry.coordinates,s._isActive){var n=s._getMarkerIcon();if(s._options.showUserLocation?s._gpsMarker?s._gpsMarker.setOptions({position:e,htmlContent:n,visible:s._isActive&&s._options.showUserLocation}):(s._gpsMarker=new l.HtmlMarker({position:e,htmlContent:n,color:s._options.markerColor}),s._map.markers.add(s._gpsMarker)):s._gpsMarker.setOptions({visible:!1}),s._updateMapCamera){var r={center:e};s._map.getCamera().zoom<15&&(r.zoom=15),s._map.setCamera(r)}}s._invokeEvent("geolocationsuccess",s._lastKnownPosition)}},s._onGpsError=function(t){s._watchId=null,s._isActive=!1,s._updateState(),s._invokeEvent("geolocationerror",t)},t&&(t.positionOptions&&(s._options.positionOptions=Object.assign(s._options.positionOptions,t.positionOptions)),t.style&&(s._options.style=t.style),t.markerColor&&(s._options.markerColor=t.markerColor),"boolean"==typeof t.showUserLocation&&(s._options.showUserLocation=t.showUserLocation),"boolean"==typeof t.trackUserLocation&&(s._options.trackUserLocation=t.trackUserLocation),"number"==typeof t.maxZoom&&(s._options.maxZoom=Math.min(Math.max(t.maxZoom,0),24)),"boolean"==typeof t.calculateMissingValues&&(s._options.calculateMissingValues=t.calculateMissingValues),"boolean"==typeof t.updateMapCamera&&(s._options.updateMapCamera=t.updateMapCamera,s._updateMapCamera=t.updateMapCamera)),s}var b=Object.freeze({__proto__:null,GeolocationControl:m}),k=i.merge("atlas.control",b);t.control=k}(this.atlas=this.atlas||{},atlas);
